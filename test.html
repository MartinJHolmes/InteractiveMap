<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Test</title>


  <style>
    body {
      border: 1px solid green;
    }

    .big-div {
      width: 1000px;
      height: 2000px;
      background-color: blue;
    }

    #log {
      width: 500px;
      height: 50px;
    }
  </style>
</head>

<body>

  <button onclick="logScroll()">Log Scroll Position</button>

  <script>
    function getScrollY() {
      return window.scrollY || document.documentElement.scrollTop || document.body.scrollTop || 0;
    }

    function getScrollX() {
      return window.scrollX || document.documentElement.scrollLeft || document.body.scrollLeft || 0;
    }

    function logScroll99() {
      const x = getScrollX();
      const y = getScrollY();

      console.log(`Scroll position → X: ${x}, Y: ${y}`);
      document.getElementById("log").value = `Scroll position → X: ${x}, Y: ${y}`;
    }

    function logScroll() {
      moveInfoBoxToCentre();
      // const visual = window.visualViewport;
      // const infoBox = document.getElementById('infoBox');

      // if (visual) {
      //   console.log("Visual viewport scroll:");
      //   console.log("x:", visual.pageLeft, "y:", visual.pageTop);
      //   document.getElementById("log").value = `Visual viewport → X: ${visual.pageLeft}, Y: ${visual.pageTop}`;
      //   infoBox.style.top = `${getVisualViewportCenter().y}px`;
      //   infoBox.style.left = `${getVisualViewportCenter().x}px`;
      // } else {
      //   console.log("Fallback:");
      //   console.log("x:", window.scrollX, "y:", window.scrollY);
      // }
    }

    function moveInfoBoxToCentre() {
      const infoBox = document.getElementById('infoBox');
      // if (!window.visualViewport) {
      //   // fallback: approximate with layout viewport
      //   const x = (window.scrollX || document.documentElement.scrollLeft || document.body.scrollLeft || 0) + window.innerWidth / 2;
      //   const y = (window.scrollY || document.documentElement.scrollTop || document.body.scrollTop || 0) + window.innerHeight / 2;
      //   return { x, y };
      // }

      const vv = window.visualViewport;
      const centerX = vv.pageLeft + vv.width / 2;
      const centerY = vv.pageTop + vv.height / 2;
      infoBox.style.top = `${centerY}px`;
      infoBox.style.left = `${centerX}px`;
    }
  </script>



  <style>
    .test-container {
      display: flex;
    }

    #infoBox {
      position: absolute;
      top: 30px;
      left: 30px;
      width: 200px;
      height: 50px;
      background-color: aqua;
      z-index: 1000;
    }
  </style>

  <div id="infoBox">
    <span class="close" onclick="hideInfo()">✖</span>
    <h3 id="infoTitle"></h3>
    <p id="infoDesc"></p>
  </div>

  <div class="big-div"></div>

  <textarea id="log" readonly placeholder="GPS messages will appear here..."></textarea>
  <div class="test-container">
    <button onclick="logScroll()">Log Scroll Position</button>
    <button onclick="logScroll()">Log Scroll Position</button>
    <button onclick="logScroll()">Log Scroll Position</button>
    <button onclick="logScroll()">Log Scroll Position</button>
    <button onclick="logScroll()">Log Scroll Position</button>
    <button onclick="logScroll()">Log Scroll Position</button>
    <button onclick="logScroll()">Log Scroll Position</button>
  </div>

  <script src="include/common.js"></script>


</body>

</html>